{
	"info": {
		"_postman_id": "5f9928ae-4166-400f-a3f3-c8eaf7d79194",
		"name": "Case-keeper",
		"description": "Case keeper is a Directus application. The sole purpose is to manage the cases related to doing the EKYC process.\n\nMain features : \n- Create case\n- Get Verification status\n- Manage business login\n- Get the latest updated information from Mac-KYC-core regarding the verification",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Case",
			"item": [
				{
					"name": "Create new",
					"request": {
						"method": "POST",
						"header": [
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjIyZTMxNzVjLThmZWItNDQ3MS04NmQ5LTY1NGIwNDJlOThkOCIsInJvbGUiOiI1YzRkNmMzNy02MzlmLTRhNzQtOWU5Yi02NTEyNDNkYWRkYmQiLCJhcHBfYWNjZXNzIjp0cnVlLCJhZG1pbl9hY2Nlc3MiOnRydWUsImlhdCI6MTY0ODAzNDUyOSwiZXhwIjoxNjQ5MzMwNTI5LCJpc3MiOiJkaXJlY3R1cyJ9.dYuLZnWAqCSB963ThEow1bdclN7Is0BvYf38NFRyNUQ",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"remark\": \"Some case\",\n    \"room_id\": \"ABDOIJG\",\n    \"case_type\": \"Juvenile\",\n    \"client_config_id\": \"b6a17d85-e3d5-44f9-855a-4db57e98e93e\",\n    \"attach_meeting_room\" : false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_path}}/items/case",
							"host": [
								"{{base_path}}"
							],
							"path": [
								"items",
								"case"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Auth",
			"item": [
				{
					"name": "SSO Auth",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_path}}/auth/login/:provider",
							"host": [
								"{{base_path}}"
							],
							"path": [
								"auth",
								"login",
								":provider"
							],
							"variable": [
								{
									"key": "provider",
									"value": "mac_portal"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get all cases",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_path}}/items/spaghetti_case",
					"host": [
						"{{base_path}}"
					],
					"path": [
						"items",
						"spaghetti_case"
					]
				},
				"description": "Get all cases returns all the cases that you can access. The level of access depends on the token or SSO used to call the API"
			},
			"response": [
				{
					"name": "Get all cases",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_path}}/items/spaghetti_case",
							"host": [
								"{{base_path}}"
							],
							"path": [
								"items",
								"spaghetti_case"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Tue, 22 Mar 2022 09:21:39 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json; charset=utf-8"
						},
						{
							"key": "Content-Length",
							"value": "579521"
						},
						{
							"key": "Connection",
							"value": "keep-alive"
						},
						{
							"key": "Access-Control-Allow-Credentials",
							"value": "true"
						},
						{
							"key": "Access-Control-Expose-Headers",
							"value": "Content-Range"
						},
						{
							"key": "Cache-Control",
							"value": "no-cache"
						},
						{
							"key": "Content-Security-Policy",
							"value": "script-src 'self' 'unsafe-eval';worker-src 'self' blob:;child-src 'self' blob:;img-src 'self' data: blob:;connect-src 'self' https://*;default-src 'self';base-uri 'self';block-all-mixed-content;font-src 'self' https: data:;frame-ancestors 'self';object-src 'none';script-src-attr 'none';style-src 'self' https: 'unsafe-inline'"
						},
						{
							"key": "Etag",
							"value": "W/\"8d7c1-TLA9+lr5ayEx4CP+37fCr4fHp1k\""
						},
						{
							"key": "Strict-Transport-Security",
							"value": "max-age=315360000; includeSubDomains; preload"
						},
						{
							"key": "Vary",
							"value": "Origin, Cache-Control"
						},
						{
							"key": "X-Content-Type-Options",
							"value": "nosniff"
						},
						{
							"key": "X-Powered-By",
							"value": "Directus"
						},
						{
							"key": "X-Xss-Protection",
							"value": "1; mode=block"
						},
						{
							"key": "x-correlation-id",
							"value": "01109f8e-5541-42a0-807e-a406f2a5a6fe#390377"
						},
						{
							"key": "X-Kong-Upstream-Latency",
							"value": "267"
						},
						{
							"key": "X-Kong-Proxy-Latency",
							"value": "0"
						}
					],
					"cookie": [
						{
							"expires": "Invalid Date"
						}
					],
					"body": "{\n    \"data\": [\n        {\n            \"id\": \"$guid\",\n            \"user_created\": \"$randomUUID\",\n            \"date_created\": \"$isoTimestamp\",\n            \"user_updated\": \"$randomUUID\",\n            \"date_updated\": \"$isoTimestamp\",\n            \"remark\": null,\n            \"claim_type\": \"Accident\",\n            \"first_name\": \"$randomFirstName\",\n            \"last_name\": \"$randomLastName\",\n            \"phone_number\": \"$randomPhoneNumber\",\n            \"email\": \"$randomEmail\",\n            \"verification_cache\": {\n                \"id\": \"$randomUUID\",\n                \"ref\": null,\n                \"status\": \"in_progress\",\n                \"notifyType\": \"sms\",\n                \"createdAt\": \"$isoTimestamp\",\n                \"expiresAt\": \"$isoTimestamp\",\n                \"notifiesAt\": \"$isoTimestamp\",\n                \"frontIdCardConfig\": {\n                    \"required\": true,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                },\n                \"backIdCardConfig\": {\n                    \"required\": true,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                },\n                \"idFaceRecognitionConfig\": {\n                    \"required\": true,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                },\n                \"vaccinePassportConfig\": {\n                    \"required\": true,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                },\n                \"amloConfig\": {\n                    \"required\": false,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                },\n                \"dopaConfig\": {\n                    \"required\": true,\n                    \"isEditable\": true,\n                    \"threshHold\": 0.8,\n                    \"checkLiveliness\": true\n                }\n            }\n        }\n    ]\n}"
				}
			]
		},
		{
			"name": "Create new case",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"frontIdCard\": \"true\",\n    \"backIdCard\": \"true\",\n    \"idFaceRecognition\": \"true\",\n    \"vaccinePassport\": \"true\",\n    \"amlo\": \"true\",\n    \"dopa\": \"true\",\n    \"claimType\": \"payer\"\n    \n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_path}}/items/spaghetti_case",
					"host": [
						"{{base_path}}"
					],
					"path": [
						"items",
						"spaghetti_case"
					]
				},
				"description": "Create new case  \nWhen a new case gets created with the SSO login. The directus will check who is logged in and based on the provider. And get the client config that matches the provider and get all the defaults configs required to create the case eg:\n\n*   notifyAt : When to notify the client\n*   expireAt : How many days to expire case after being created  \n    Request Body\n    \n\n| **field** | **status** | **type** | **description** |\n| --- | --- | --- | --- |\n| firstName |  |  |  |\n| lastName |  |  |  |\n| phoneNumber | Optional | string | Needed if sms is the default notify type |\n| email | Optional | string | Needed if email is the default notify type |\n| frontIdCard | Optional | boolean |  |\n| backIdCard | Optional | boolean |  |\n| idFaceRecognition | Optional | boolean |  |\n| vaccinePassport | Optional | boolean |  |\n| amlo | Optional | boolean |  |\n| dopa | Optional | boolean |  |\n| claimType | Optional | string |  |"
			},
			"response": []
		},
		{
			"name": "Get case by id",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_path}}/items/spaghetti_case/:id",
					"host": [
						"{{base_path}}"
					],
					"path": [
						"items",
						"spaghetti_case",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "7a47ce72-c73b-4a53-a803-cfe41732a72f",
							"description": "REQUIRED: verificationId can get after case has been created."
						}
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_path",
			"value": "http://localhost:8055",
			"type": "string"
		}
	]
}
